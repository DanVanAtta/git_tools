#!/bin/bash

NEW_BRANCH=$1
shift 1
FILE_LIST="$@"

set -eu

function usage() {
  echo "./$(basename $0) [BRANCH_NAME] [FILES_TO_COMMIT]"
  echo "BRANCH_NAME: name of new branch"
  echo "FILES_TO_COMMIT: name with path of files to commit"
  exit -1
}

if [ -z "$FILE_LIST" ]; then
  usage
fi

CURRENT_BRANCH="$(git branch | grep "\*" | sed 's/.* //')"
git checkout -b $NEW_BRANCH
git commit -S $FILE_LIST
git checkout $CURRENT_BRANCH

echo "Committed: $FILE_LIST to new branch $NEW_BRANCH"

